# Cha-Kra Coding Constitution

## Core Principles

- Follow requirements precisely and to the letter
- Think step-by-step: plan in detailed pseudocode first
- Write correct, best practice, DRY, bug-free, fully functional code
- Prioritize accessibility and user experience over complexity
- Implement all functionality completely—NO todos, placeholders, or missing pieces
- Be concise and minimize unnecessary prose

## Technology Stack

- **Framework**: Solid.js (reactive, performant)
- **Styling**: Tailwind CSS v4 (utility-first with custom chakra theme)
- **TypeScript**: Strictest rules via @tsconfig/strictest
- **Build**: Vite (modern, fast bundler)
- **PWA**: Service workers, offline support, installable
- **Animation**: solid-motionone for motion design

## Code Implementation Rules

### Component Architecture

- Use proper TypeScript interfaces for all props
- Follow Solid.js patterns with signals and effects
- Create compound components when appropriate
- Export components with proper display names
- Use composition over complex prop drilling
- Implement proper error boundaries where needed

### Styling Guidelines

- Always use Tailwind classes with design tokens
- Use CSS variables for theme-aware styling
- Implement proper focus states and accessibility indicators
- Use conditional classes with utility functions
- Support dark mode through @custom-variant in CSS
- Follow spacing and typography scales

### TypeScript Standards

- Strictest mode enabled via @tsconfig/strictest
- No implicit any, proper null checks
- No unused locals or parameters
- Proper type inference and explicit return types
- Use const assertions where appropriate

### Accessibility Standards

- Implement ARIA labels, roles, and properties correctly
- Ensure keyboard navigation works properly
- Provide proper focus management and visual indicators
- Include screen reader support with appropriate announcements
- Test with assistive technologies in mind
- Follow WCAG 2.1 AA guidelines

### Animation Patterns

- Use solid-motionone for React-like animation patterns
- Prioritize transform and opacity for GPU acceleration
- Implement prefers-reduced-motion support
- Keep micro-interactions under 500ms
- Use appropriate easing curves (ease-out for entrances, ease-in for exits)
- Create meaningful motion that supports user understanding

### Performance Standards

- Optimize re-renders with proper reactivity
- Use will-change CSS property judiciously
- Implement intersection observers for scroll-triggered animations
- Lazy load components and routes where appropriate
- Minimize bundle size with code splitting

### Security

- Never introduce security vulnerabilities (XSS, SQL injection, command injection, etc.)
- Validate at system boundaries (user input, external APIs)
- Trust internal code and framework guarantees
- Don't add unnecessary error handling for impossible scenarios

### Code Quality

- Avoid over-engineering—only make changes that are clearly necessary
- Don't add features, refactor code, or make "improvements" beyond what was asked
- Don't add error handling, fallbacks, or validation for scenarios that can't happen
- Don't create helpers, utilities, or abstractions for one-time operations
- Three similar lines of code is better than a premature abstraction
- No backwards-compatibility hacks—if something is unused, delete it completely

### Dark Mode Implementation

- Use @custom-variant dark (&:where(.dark, .dark *)) in index.css
- Toggle dark mode by adding/removing .dark class on html element
- Use localStorage to persist user preference
- Fall back to system preference if user hasn't chosen
- Prevent FOUC with inline script in <head>

### File Organization

- Components in src/components/
- Pages in src/pages/
- Stores in src/stores/
- Use ~ alias for src/ imports
- Keep related files together

### Git Practices

- Write concise, descriptive commit messages
- Focus on "why" rather than "what"
- Avoid AI mentions and unnecessary text
- Keep PRs focused and reviewable
- Test before committing

### Configuration Philosophy

- Use defaults whenever possible
- Extend from community standards (@tsconfig/strictest)
- Minimize custom configuration
- Document deviations from defaults

## Response Protocol

- If uncertain, state so explicitly
- Don't guess—search for latest documentation
- Stay focused on implementation over general explanations
- Provide examples only when requested

## Knowledge Updates

When working with Solid.js, Tailwind CSS, animations, or component design:
- Search for latest documentation and best practices
- Ensure code follows current standards and accessibility guidelines
- Stay updated on framework and library changes
